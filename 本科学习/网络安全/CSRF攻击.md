# CSRF攻击

## 原理

``` 
利用用户A在网站A的登录cookie
恶意网站B在自己的网站上添加了一个 修改A在网站A数据的请求的链接 用户可能无意识点击
导致用户A在网站A上的数据被修改
```

## 防御方式

### 服务端

1. Cookie Hashing(伪随机数)

   ```
   因为恶意网站无法获取cookie具体信息 我们可以把cookie的内容放进form里一并提交
   前端在所有修改信息的Post的 form中增加一个hidden属性 里面是一个后端传来的字符串的hash加密后的值
   后端在验证表单的时候 要将这个随机字符串与原来的随机字符串的hash值进行校验
   
   这个方法个人觉得已经可以杜绝99%的CSRF攻击了，那还有1%呢....由于用户的Cookie很容易由于网站的XSS漏洞而被盗取，这就另外的1%。一般的攻击者看到有需要算Hash值，基本都会放弃了，某些除外，所以如果需要100%的杜绝，这个不是最好的方法。
   ```

2. 验证码

   ```
   这个方案的思路是：每次的用户提交都需要用户在表单中填写一个图片上的随机字符串，厄....这个方案可以完全解决CSRF，但个人觉得在易用性方面似乎不是太好，还有听闻是验证码图片的使用涉及了一个被称为MHTML的Bug，可能在某些版本的微软IE中受影响。
   ```

3. One-Time Tokens(不同的表单包含一个不同的伪随机值)

   ```
   
   ```

   

4. 

